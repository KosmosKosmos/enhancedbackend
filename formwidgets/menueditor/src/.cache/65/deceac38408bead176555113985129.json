{"id":"ArR8","dependencies":[{"name":"/Users/Melmoth/Sites/andosto/cms/plugins/kosmoskosmos/enhancedbackend/formwidgets/menueditor/src/.babelrc","includedInParent":true,"mtime":1559046307932},{"name":"/Users/Melmoth/Sites/andosto/cms/plugins/kosmoskosmos/enhancedbackend/formwidgets/menueditor/src/package.json","includedInParent":true,"mtime":1566388652481},{"name":"sl-vue-tree","loc":{"line":120,"column":22},"parent":"/Users/Melmoth/Sites/andosto/cms/plugins/kosmoskosmos/enhancedbackend/formwidgets/menueditor/src/menu/VueTree.vue","resolved":"/Users/Melmoth/Sites/andosto/cms/plugins/kosmoskosmos/enhancedbackend/formwidgets/menueditor/src/node_modules/sl-vue-tree/dist/sl-vue-tree.js"},{"name":"/Users/Melmoth/Sites/andosto/cms/plugins/kosmoskosmos/enhancedbackend/formwidgets/menueditor/src/.htmlnanorc","includedInParent":true,"mtime":1550673594334}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var t=e(require(\"sl-vue-tree\"));function e(t){return t&&t.__esModule?t:{default:t}}var i={components:{SlVueTree:t.default},props:[\"structure\",\"locales\",\"currentlang\"],data:function(){return{labels:{titles:\"Titel\",tagList:\"Schlagworte\",description:\"Erläuterung\",help:\"Hilfe\",cancel:\"Abbrechen\",save:\"Speichern\"},currentNode:{},currentOriginalNode:{},contextMenuIsVisible:!1,nodes:[],selectedNode:{title:\"\"},translations:{titles:{value:{},current:\"\"},tagList:{value:{},current:\"\"},description:{value:{},current:\"\"},help:{value:{},current:\"\"}}}},mounted:function(){for(var t in this.translations)this.translations[t].current=this.currentlang;this.richEditor=$(\"#modal-close-outside [data-control=richeditor]\"),this.nodes=this.structure,window.slVueTree=this.$refs.slVueTree},methods:{getTitle:function(t){return t.data&&t.data.directory?t.data.titles.de:t.title},showModal:function(t){var e=this;this.selectedNode=t,this.setTranslations(t),UIkit.modal(\"#modal-close-outside\").show(),setTimeout(function(){e.richEditor.richEditor(\"setContent\",e.translations.help.value[e.translations.help.current])},500)},isDeletable:function(t){return t.data&&t.data.directory&&!t.children.length},editNode:function(t){this.showModal(t),this.currentNode=t.path.join(\",\"),this.currentOriginalNode=t},removeNode:function(t){var e=this;UIkit.modal.confirm(this.getTitle(t)+\" wirklich löschen?\").then(function(){e.$refs.slVueTree.remove([t.path]),e.save()})},nodeDropped:function(t,e,i){this.save()},toggleVisibility:function(t,e){var i=this.$refs.slVueTree;t.stopPropagation();var r=!e.data||!1!==e.data.visible;i.updateNode(e.path,{data:{visible:!r}}),this.currentNode=null},nodeToggled:function(t,e){this.currentNode=null},addFolder:function(){var t=this.$refs.slVueTree,e=\"item\"+t.getRoot().currentValue.length,i={title:e,isLeaf:!1,children:[],key:e,path:[t.getRoot().currentValue.length],data:{directory:!0,titles:{de:\"Neuer Eintrag\",en:\"New item\"}}};this.nodes.push(i),t.emitInput(this.nodes),this.showModal(i)},setTranslations:function(t){for(var e in this.translations)t.data[e]&&(this.translations[e].value=t.data[e])},setLocale:function(t,e){var i=this;\"help\"===t?(this.translations.help.value[this.translations[t].current]=$(\".field-richeditor textarea\").val(),setTimeout(function(){i.translations[t].current=e,i.richEditor.richEditor(\"setContent\",i.translations.help.value[e])})):this.translations[t].current=e},show:function(){var t=this,e=this.selectedNode.data?this.selectedNode.data:{};for(var i in this.translations)\"help\"===i&&(this.translations.help.value[this.translations[i].current]=$(\".field-richeditor textarea\").val()),this.translations[i].value&&(e[i]=this.translations[i].value);setTimeout(function(){slVueTree.updateNode(t.selectedNode.path,{data:e}),t.save(),t.currentNode=null}),UIkit.modal(\"#modal-close-outside\").hide()},save:function(){$(\"#menueditor-value\").val(JSON.stringify(this.nodes))}}};exports.default=i;\n(function(){var t=exports.default||module.exports;\"function\"==typeof t&&(t=t.options),Object.assign(t,{render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",[a(\"ul\",{staticClass:\"uk-iconnav\"},[a(\"li\",[a(\"a\",{attrs:{href:\"#\",\"uk-icon\":\"icon: plus\"},on:{click:function(s){return t.addFolder()}}})])]),t._v(\" \"),a(\"sl-vue-tree\",{ref:\"slVueTree\",attrs:{\"allow-multiselect\":!1},on:{drop:t.nodeDropped,toggle:t.nodeToggled},scopedSlots:t._u([{key:\"title\",fn:function(s){var a=s.node;return[t._v(t._s(t.getTitle(a)))]}},{key:\"toggle\",fn:function(s){var e=s.node;return[e.isLeaf?t._e():a(\"span\",[e.isExpanded?a(\"i\",{attrs:{\"uk-icon\":\"album\"}}):t._e(),t._v(\" \"),e.isExpanded?t._e():a(\"i\",{attrs:{\"uk-icon\":\"folder\"}})])]}},{key:\"sidebar\",fn:function(s){var e=s.node;return[a(\"ul\",{staticClass:\"uk-iconnav\"},[a(\"li\",[a(\"a\",{attrs:{href:\"#\",\"uk-icon\":\"icon: file-edit\"},on:{click:function(s){return t.editNode(e)}}})]),t._v(\" \"),t.isDeletable(e)?a(\"li\",[a(\"a\",{attrs:{href:\"#\",\"uk-icon\":\"icon: trash\"},on:{click:function(s){return t.removeNode(e)}}})]):t._e(),t._v(\" \"),a(\"li\",[a(\"span\",{staticClass:\"visible-icon\",on:{click:function(s){return t.toggleVisibility(s,e)}}},[e.data&&!1===e.data.visible?t._e():a(\"i\",{attrs:{\"uk-icon\":\"laptop\"}}),t._v(\" \"),e.data&&!1===e.data.visible?a(\"i\",{attrs:{\"uk-icon\":\"ban\"}}):t._e()])])])]}}]),model:{value:t.nodes,callback:function(s){t.nodes=s},expression:\"nodes\"}}),t._v(\" \"),a(\"div\",{ref:\"myid\",staticClass:\"uk-flex-top\",attrs:{id:\"modal-close-outside\",\"uk-modal\":\"\"}},[a(\"div\",{staticClass:\"uk-modal-dialog\"},[a(\"button\",{staticClass:\"uk-modal-close-default\",attrs:{type:\"button\",\"uk-close\":\"\"}}),t._v(\" \"),a(\"div\",{staticClass:\"uk-modal-header\"},[a(\"h2\",{staticClass:\"uk-modal-title\"},[t._v(t._s(t.getTitle(t.selectedNode)))])]),t._v(\" \"),a(\"div\",{staticClass:\"uk-modal-body\"},[t._m(0),t._v(\" \"),a(\"ul\",{staticClass:\"uk-switcher uk-margin\",attrs:{id:\"my-id\"}},[a(\"li\",t._l([\"titles\",\"description\",\"tagList\"],function(s){return a(\"div\",{staticClass:\"uk-margin\"},[a(\"label\",{staticClass:\"uk-form-label\",attrs:{for:\"'form-'.field\"}},[t._v(t._s(t.labels[s]))]),t._v(\" \"),a(\"div\",{staticClass:\"uk-form-controls\"},[a(\"div\",{staticClass:\"uk-inline\",class:{\"uk-width-1-1\":\"titles\"!==s}},[a(\"a\",{staticClass:\"uk-form-icon uk-form-icon-flip uk-text-uppercase\",attrs:{href:\"\"}},[t._v(\" \"+t._s(t.translations[s].current)+\" \")]),t._v(\" \"),a(\"div\",{attrs:{\"uk-dropdown\":\"mode: click\"}},[a(\"ul\",{staticClass:\"uk-list\"},t._l(t.locales,function(e,i){return a(\"li\",{staticClass:\"uk-text-uppercase\",on:{click:function(a){return t.setLocale(s,i)}}},[t._v(\" \"+t._s(i)+\" \")])}),0)]),t._v(\" \"),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.translations[s].value[t.translations[s].current],expression:\"translations[field].value[translations[field].current]\"}],staticClass:\"uk-input\",attrs:{id:\"form-\".field,type:\"text\",placeholder:t.labels[s]},domProps:{value:t.translations[s].value[t.translations[s].current]},on:{input:function(a){a.target.composing||t.$set(t.translations[s].value,t.translations[s].current,a.target.value)}}})])])])}),0),t._v(\" \"),a(\"li\",[a(\"div\",{staticClass:\"uk-margin\"},[a(\"label\",{staticClass:\"uk-form-label uk-width-1-1\"},[t._v(\" \"+t._s(t.labels.help)+\" \"),a(\"div\",{staticClass:\"uk-inline uk-float-right\"},[a(\"span\",{staticClass:\"uk-text-uppercase\",attrs:{href:\"\"}},[t._v(\" \"+t._s(t.translations.help.current)+\" \")]),t._v(\" \"),a(\"div\",{attrs:{\"uk-dropdown\":\"mode: click\"}},[a(\"ul\",{staticClass:\"uk-list\"},t._l(t.locales,function(s,e){return a(\"li\",{staticClass:\"uk-text-uppercase\",on:{click:function(s){return t.setLocale(\"help\",e)}}},[t._v(\" \"+t._s(e)+\" \")])}),0)])])]),t._v(\" \"),a(\"div\",{staticClass:\"uk-form-controls uk-width-1-1\"},[a(\"div\",{staticClass:\"field-richeditor size-large\",attrs:{\"data-use-media-manager\":\"true\",\"data-editor-lang\":\"de\",\"data-links-handler\":\"formMenuItems::onLoadPageLinksForm\",\"data-ace-vendor-path\":\"/modules/backend/formwidgets/codeeditor/assets/vendor/ace\",\"data-control\":\"richeditor\"}},[a(\"textarea\",{attrs:{placeholder:t.labels.help}}),t._v(\" \"),a(\"div\",{staticClass:\"height-indicator\"})])])])])])]),t._v(\" \"),a(\"div\",{staticClass:\"uk-modal-footer uk-text-right\"},[a(\"button\",{staticClass:\"uk-button uk-button-default uk-modal-close\",attrs:{type:\"button\"}},[t._v(\" \"+t._s(t.labels.cancel)+\" \")]),t._v(\" \"),a(\"button\",{staticClass:\"uk-button uk-button-primary\",attrs:{type:\"button\"},on:{click:function(s){return t.show()}}},[t._v(\" \"+t._s(t.labels.save)+\" \")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s(\"ul\",{attrs:{\"data-uk-tab\":\"{connect:'#my-id'}\"}},[s(\"li\",{staticClass:\"uk-active\"},[s(\"a\",{attrs:{href:\"\"}},[this._v(\"Allgemein\")])]),this._v(\" \"),s(\"li\",[s(\"a\",{attrs:{href:\"\"}},[this._v(\"Hilfe\")])])])}],_compiled:!0,_scopeId:null,functional:void 0});})();","css":".field-multilingual.field-multilingual-text .ml-btn{top:2px;height:auto;margin-top:inherit}"},"sourceMaps":null,"error":null,"hash":"9cf6566e29f7425aa2de8a5d197af2fa","cacheData":{"env":{}}}